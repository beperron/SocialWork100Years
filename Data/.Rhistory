str(mat)
head(mat)
mat
head(full.df)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dashes<-filter(pages.df, grepl("-", record) )
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes$record)
bad.pages
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dashes<-filter(pages.df, grepl("-", record) )
dashes
dim(full.df)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dim(pages.df)
dashes<-filter(pages.df, grepl("-", record) )
dim(dashes)
names(dashes)
library(dplyr)
dashes<-filter(pages.df, grepl("-", record) )
dashes
pages.df<-filter(full.df, attributes=="pages")
dim(pages)
dim(pages.df)
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dim(pages.df)
head(pages.df)
tail(pages.df)
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dim(pages.df)
dashes<-filter(pages.df, grepl("-", record) )
dim(dashes)
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes$record)
length(bad.pages)
dashes <- dashes[-bad.pages, ]
splitDash<-strsplit(dashes$record, "-")
mat <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
str(mat)
mat <- mat[,c(1,2)]
mat$X1<- as.numeric(mat$X1)
mat$X2<- as.numeric(mat$X2)
str(mat)
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
dashes<-filter(pages.df, grepl("-", record) )
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes$record)
dashes <- dashes[-bad.pages, ]
splitDash<-strsplit(dashes$record, "-")
mat <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
mat <- mat[,c(1,2)]
mat$X1<- as.numeric(as.character(mat$X1))
mat$X2<- as.numeric(as.character(mat$X2))
a <- with(mat, X2>=X1)
table(a)
mat$record <- mat$X2 - mat$X1 + 1
hist(mat$record)
stem(mat$record)
View(mat)
mean(mat$record)
mean(mat$record, na.rm=TRUE)
median(mat$record, na.rm=TRUE)
head(dashes)
dim(splitDash)
dim(dashes)
names(dashes)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes$record)
dashes.df <- dashes[-bad.pages, ]
splitDash<-strsplit(dashes.df$record, "-")
mat <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
mat <- mat[,c(1,2)]
colnames(mat) <- c("pageStart", "pageEnd")
mat$pageStart<- as.numeric(as.character(mat$pageStart))
mat$pageEnd<- as.numeric(as.character(mat$pageEnd))
mat$record <- mat$pageEnd - mat$pageStart + 1
mat<-select(mat, record)
head(mat)
dashes.df <- select(dashes, -record)
dashes.df<-cbind(dashes, mat)
pages.df<-filter(full.df, attributes=="pages")
dim(pages.df)
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes$record)
dashes.df <- dashes[-bad.pages, ]
dim(dashes.df)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes.identifier<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes.identifier$record)
dashes.df <- dashes.identifier[-bad.pages, ]
#String split on dashes and then piece back together
splitDash<-strsplit(dashes.df$record, "-")
mat <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
mat <- mat[,c(1,2)]
colnames(mat) <- c("pageStart", "pageEnd")
mat$pageStart<- as.numeric(as.character(mat$pageStart))
mat$pageEnd<- as.numeric(as.character(mat$pageEnd))
mat$record <- mat$pageEnd - mat$pageStart + 1
mat<-select(mat, record)
dashes.df <- select(dashes.df, -record)
dashes.df<-cbind(dashes.df, mat)
dashes.ID<-dashes.df$articleID
pages.noDashes<-pages.df[!pages.df$articleID %in% dashes.ID, ]
pages.df<-rbind(pages.noDashes, dashes.df)
pages.df$record<-as.numeric(pages.df$record)
pages.df[is.na(pages.df)] <- 0
pages.remove<-filter(pages.df, record < 3)    ## Set threshold for retaining articles by number of pages
pages.remove.ID <- pages.remove$articleID
full.df <- full.df[!full.df$articleID %in% pages.remove.ID, ]
rownames(full.df) <- NULL
pages.keep<-filter(pages.df, record>=3)
pages.keep$record<-as.character(pages.keep$record)
pages.keep$record<-as.numeric(pages.keep$record)
full.df<-filter(full.df, attributes!="pages")
full.df<-rbind(full.df, pages.keep)
dim(full.df)
# Read data files
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
shortArticlesRevised.f()
titleMatching.f()
otherDocuments.f()
fewArticles.f()
#save.image(file = "socialWorkHistory.Rdata")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
ls()
source('~/.active-rstudio-document', echo=TRUE)
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes.identifier<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes.identifier$record)
dashes.df <- dashes.identifier[-bad.pages, ]
#String split on dashes and then piece back together
splitDash<-strsplit(dashes.df$record, "-")
splitDash.df <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
splitDash.df <- splitDash.df[,c(1,2)]
colnames(splitDash.df) <- c("pageStart", "pageEnd")
splitDash.df$pageStart<- as.numeric(as.character(splitDash.df$pageStart))
splitDash.df$pageEnd<- as.numeric(as.character(splitDash.df$pageEnd))
splitDash.df$record <- splitDash.df$pageEnd - splitDash.df$pageStart + 1
splitDash.df <-select(splitDash.df, record)
dashes.df <- select(dashes.df, -record)
dashesUpdated.df <- cbind(dashes.df, splitDash.df)
dashesID<-dashesUpdated.df$articleID
pages.noDashes<-pages.df[!pages.df$articleID %in% dashes.ID, ]
pages.noDashes<-pages.df[!pages.df$articleID %in% dashesID, ]
head(pages.noDashes)
head(pages.noDashes, 100)
head(dashes.df)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes.identifier<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes.identifier$record)
dashes.df <- dashes.identifier[-bad.pages, ]
head(dashes.df)
pages.df<-filter(full.df, attributes=="pages")
pages.df$record <- gsub("p", "", pages.df$record)
pages.df$record <- gsub("ArtID:\\s", "", pages.df$record)
pages.df$record<-gsub("S", "", pages.df$record)
pages.df$record <- gsub(" ", "", pages.df$record)
#Identify all records with dashes
dashes.identifier<-filter(pages.df, grepl("-", record) )
#Identify and remove all problematic records with dashes
bad.pages <- grep("[^0-9]{1,}[-]|[-][^0-9]{1,}|^\\-|$\\-", dashes.identifier$record)
dashes.df <- dashes.identifier[-bad.pages, ]
#String split on dashes and then piece back together
splitDash<-strsplit(dashes.df$record, "-")
splitDash.df <- plyr::rbind.fill(lapply(splitDash, function(X) data.frame(t(X))))
splitDash.df <- splitDash.df[,c(1,2)]
colnames(splitDash.df) <- c("pageStart", "pageEnd")
splitDash.df$pageStart<- as.numeric(as.character(splitDash.df$pageStart))
splitDash.df$pageEnd<- as.numeric(as.character(splitDash.df$pageEnd))
splitDash.df$record <- splitDash.df$pageEnd - splitDash.df$pageStart + 1
splitDash.df <-select(splitDash.df, record)
#Replace record column with new calculations
dashesUpdated.df <- cbind(dashes.df, splitDash.df
)
dashesID<-dashesUpdated.df$articleID
head(dashesID)
head(dashesUpdated.df)
dashesUpdated <- dashesUpdated[,c(1,2,4)]
dashesUpdated <- dashesUpdated.df[,c(1,2,4)]
head(dashesUpdated.df)
dashesUpdated.df <- dashesUpdated.df[,c(1,2,4)]
head(dashesUpdated.df)
noDashes.df <- pages.df[!pages.df$articleID %in% dashesUpdated.df$articleID, ]
dim(noDashes.df)
dim(dashesUpdated.df)
head(noDashes.df)
good.pages <- grepl("[0-9]+", noDashes.df$record)
table(good.pages)
noDashes.df <- noDashes.df[good.pages, ]
noDashes.df$record <- as.numeric(as.character(noDashes.df$record))
hist(noDashes.df$record)
names(noDashes.df)
pages.df<-rbind(dashesUpdated.df, noDashesUpdated.df)
noDashesUpdated.df$record <- as.numeric(as.character(noDashes.df$record))
noDashes.df <- noDashes.df[good.pages, ]
noDashes.df$record <- as.numeric(as.character(noDashes.df$record))
pages.df<-rbind(dashesUpdated.df, noDashes.df)
dim(pages.df)
pages.df[is.na(pages.df)] <- 0
dim(pages.df)
pages.remove<-filter(pages.df, record < 3)    ## Set threshold for retaining articles by number of pages
pages.remove.ID <- pages.remove$articleID
full.df <- full.df[!full.df$articleID %in% pages.remove.ID, ]
rownames(full.df) <- NULL
pages.keep<-filter(pages.df, record>=3 & record <= 50)
str(pages.keep)
full.df<-filter(full.df, attributes!="pages")
full.df<-rbind(full.df, pages.keep)
dim(full.df)
# Clear workspace
rm(list=ls())
# Read BWR functions for Mac OS
source("/Users/beperron/Git/BibWrangleR/functions/proquestBWR.R")
# Set the path where original raw data are stored
setwd("/Users/beperron/Git/SocialWorkResearch/Data")
# Set the working directory to store files created by BWR functions
path <- "/Users/beperron/Git/SocialWorkResearch/Data/ProQuest"
# Wrangle the data with the BWR function suite
proQuestBWR.f(csv=FALSE, path=path)
save(proQuestBWR.df, file = "ProQuest.R")
# Clear workspace
rm(list=ls())
# Read BWR functions for Mac OS
source("/Users/beperron/Git/BibWrangleR/functions/ebscoBWR.R")
# Set the path where original raw data are stored
setwd("/Users/beperron/Git/SocialWorkResearch/Data")
# Set the working directory to store files created by BWR functions
path <- "/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL"
# Wrangle the data with the BWR function suite
ebscoBWR.f(csv=FALSE, path=path)
save(ebscoBWR.df, file = "ebscoFULL.R")
# Read data files
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
shortArticles.f()
titleMatching.f()
otherDocuments.f()
titles <- filter(full.df, attributes == "article")
journals <- filter(full.df, attributes == "journal")
year <- filter(full.df, attributes == "pubYear")
year.journal <- dplyr::intersect(year$articleID, journals$articleID)
year.journal.titles <- dplyr::intersect(year.journal, titles$articleID)
full.df <- full.df[full.df$articleID %in% year.journal.titles, ]
exclusions.2 <- filter(full.df, attributes == "article") %>%
group_by(articleID) %>%
summarise(
N = n())
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(articleID) %>%
summarise(
N = n())
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n())
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
arrange(record) %>%
summarise(
N = n())
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N)
exclusions.2
exclusions.2$drop <- ifelse(exclusions.2$N <=20, "drop", "keep")
exclusions.2$drop
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop") %>%
select(record)
exclusions.2
exclusions.2 <- exclusions.2[,1]
str(exclusions.2)
exclusions.2 <- data.frame(exclusions.2[,1])
exclusions.2 <- data.frame(exclusions.2[,1])
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop") %>%
select(record)
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop") %>%
select(record)
titles <- filter(full.df, attributes == "article")
journals <- filter(full.df, attributes == "journal")
year <- filter(full.df, attributes == "pubYear")
year.journal <- dplyr::intersect(year$articleID, journals$articleID)
year.journal.titles <- dplyr::intersect(year.journal, titles$articleID)
full.df <- full.df[full.df$articleID %in% year.journal.titles, ]
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop") %>%
select(record)
dim(full.df)
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop") %>%
select(record)
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop")
# Read data files
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
shortArticles.f()
titleMatching.f()
otherDocuments.f()
fewArticles.f()
save.image(file = "socialWorkHistory.Rdata")
load("/Users/beperron/Git/SocialWorkResearch/Data/ebscoFULL.R")
load("/Users/beperron/Git/SocialWorkResearch/Data/proQuest.R")
hodge <- readLines("/Users/beperron/Git/SocialWorkResearch/search_specifications/hodge.txt", n = -1)
source("/Users/beperron/Git/SocialWorkResearch/functions/combineData.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/cleaningJournals.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/shortArticlesRevised.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/titleMatching.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/otherDocuments.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/fewArticles.R")
source("/Users/beperron/Git/SocialWorkResearch/functions/pretty.R")
combineData.f()
cleaningJournals.f()
shortArticles.f()
titleMatching.f()
otherDocuments.f()
titles <- filter(full.df, attributes == "article")
journals <- filter(full.df, attributes == "journal")
year <- filter(full.df, attributes == "pubYear")
year.journal <- dplyr::intersect(year$articleID, journals$articleID)
year.journal.titles <- dplyr::intersect(year.journal, titles$articleID)
full.df <- full.df[full.df$articleID %in% year.journal.titles, ]
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep")) %>%
filter(fewArticles == "drop")
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(
N = n()) %>%
arrange(N) %>%
mutate(fewArticles = ifelse(exclusions.2$N <= 20, "drop", "keep"))
exclusions.2 <- filter(full.df, attributes == "journal")
head(exclusions.)
head(exclusions.2)
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(N = n())
exclusions.2
exclusions.2 <- filter(full.df, attributes == "journal") %>%
group_by(record) %>%
summarise(N = n()) %>%
arrange(N)
exclusions.2
exclusions.3 <- exclusions.2[exclusions.2$n <=20, "record"]
exclusions.3
exclusions.3 <- exclusions.2[exclusions.2$N <=20, "record"]
exclusions.3
exclusions.2 <- exclusions.2[exclusions.2$N <=20, "record"]
fewArticles <- exclusions.2$record
fewArticles
